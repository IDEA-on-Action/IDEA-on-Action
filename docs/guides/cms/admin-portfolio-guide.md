# AdminPortfolio 관리 가이드

## 개요

### 목적
AdminPortfolio 페이지는 회사의 프로젝트 포트폴리오를 관리하는 관리자 전용 페이지입니다. MVP, Fullstack, Design, Operations 등 다양한 타입의 프로젝트를 등록하고 관리할 수 있습니다.

### 주요 기능
- 포트폴리오 프로젝트 목록 조회
- 프로젝트 검색 및 필터링 (타입, 상태)
- 프로젝트 생성, 수정, 삭제
- 공개/비공개 상태 토글
- Featured 프로젝트 설정
- 썸네일 이미지 미리보기

### 접근 권한
- **필요 권한**: Admin 이상 (editor, admin, super_admin)
- **접근 경로**: `/admin/portfolio`

---

## 화면 구성

### 목록 화면
- **상단**: 페이지 제목, "새 포트폴리오 항목" 버튼
- **검색 및 필터**:
  - 검색창: 제목 또는 요약으로 검색
  - 프로젝트 타입 필터: 전체 타입, MVP, Fullstack, Design, Operations
  - 상태 필터: 전체 상태, 공개, 비공개, Featured
- **테이블 컬럼**:
  - 썸네일: 프로젝트 이미지 (16x16 픽셀)
  - 제목: 프로젝트 제목 및 요약
  - 타입: 프로젝트 타입 뱃지
  - 상태: 공개/비공개, Featured 뱃지
  - 기술 스택: 최대 3개 표시 (+N개)
  - Featured: 스위치 토글
  - 공개: 스위치 토글
  - 작업: 수정, 삭제 버튼

### 생성/편집 화면
- **모달 다이얼로그** 형태로 표시
- **스크롤 가능**: 최대 높이 90vh, 초과 시 스크롤
- **폼 필드**:
  - 기본 정보: Slug, 제목, 요약, 상세 설명
  - 클라이언트 정보: 클라이언트명, 로고 URL
  - 프로젝트 분류: 프로젝트 타입, 썸네일 URL
  - 미디어: 이미지 URL (JSON 배열), 기술 스택 (JSON 배열)
  - 링크: 프로젝트 URL, GitHub URL
  - 프로젝트 세부: 기간, 팀 크기, 시작일, 종료일
  - 내용: 도전 과제, 해결 방법, 성과
  - 추천사: JSON 객체 (author, role, company, content, avatar)
  - 설정: Featured 여부, 공개 여부

---

## 기능 사용법

### 1. 조회

#### 목록 조회
1. `/admin/portfolio` 페이지에 접속합니다.
2. 등록된 모든 포트폴리오 프로젝트가 테이블로 표시됩니다.
3. 각 프로젝트의 썸네일, 제목, 타입, 상태, 기술 스택을 한눈에 확인할 수 있습니다.

#### 검색
1. 상단 검색창에 제목 또는 요약의 일부를 입력합니다.
2. 입력과 동시에 실시간으로 필터링됩니다.
3. 검색어는 대소문자 구분 없이 동작합니다.

#### 필터링
- **프로젝트 타입 필터**:
  - 전체 타입: 모든 타입 표시
  - MVP: MVP 프로젝트만 표시 (파란색 뱃지)
  - Fullstack: Fullstack 프로젝트만 표시 (초록색 뱃지)
  - Design: Design 프로젝트만 표시 (보라색 뱃지)
  - Operations: Operations 프로젝트만 표시 (주황색 뱃지)

- **상태 필터**:
  - 전체 상태: 모든 상태 표시
  - 공개: published=true인 프로젝트만 표시 (초록색 뱃지)
  - 비공개: published=false인 프로젝트만 표시 (회색 뱃지)
  - Featured: featured=true인 프로젝트만 표시 (노란색 뱃지)

#### 정렬
- 기본 정렬: 최근 생성순 (created_at DESC)
- 테이블 헤더 클릭으로 정렬 변경 불가 (현재 버전)

---

### 2. 생성

#### 필수 입력 항목
- **Slug** (필수): URL-friendly 형식 (예: `project-name-2024`)
- **제목** (필수): 프로젝트 제목
- **요약** (필수): 프로젝트 요약 (최소 1자)
- **프로젝트 타입** (필수): mvp, fullstack, design, operations 중 선택

#### 선택 입력 항목
- **상세 설명**: 프로젝트 상세 설명 (Markdown 지원)
- **클라이언트명**: 클라이언트 이름 (예: ABC Corp)
- **클라이언트 로고 URL**: 클라이언트 로고 이미지 URL
- **썸네일 URL**: 프로젝트 썸네일 이미지 URL
- **이미지 URL (JSON 배열)**: `["https://...", "https://..."]` 형식
- **기술 스택 (JSON 배열)**: `["React", "TypeScript", "Supabase"]` 형식
- **프로젝트 URL**: 실제 프로젝트 URL
- **GitHub URL**: GitHub 저장소 URL
- **기간**: 프로젝트 진행 기간 (예: "3개월")
- **팀 크기**: 팀원 수 (숫자, 기본값 1)
- **시작일**: 프로젝트 시작일 (날짜 선택)
- **종료일**: 프로젝트 종료일 (날짜 선택)
- **도전 과제**: 프로젝트의 주요 도전 과제
- **해결 방법**: 도전 과제에 대한 해결 방법
- **성과**: 프로젝트 성과
- **추천사 (JSON 객체)**: `{"author": "홍길동", "role": "CEO", "company": "ABC Corp", "content": "훌륭한 프로젝트였습니다.", "avatar": "https://..."}` 형식
- **Featured 여부**: Featured로 설정 시 상단에 표시 (기본값: false)
- **공개 여부**: 공개 시 사용자에게 표시 (기본값: false)

#### 폼 검증 규칙
- **Slug**: 최소 1자 이상 (URL-friendly 권장)
- **제목**: 최소 1자 이상
- **요약**: 최소 1자 이상
- **프로젝트 타입**: mvp, fullstack, design, operations 중 하나
- **JSON 필드**: 유효한 JSON 형식이어야 함
  - 이미지 URL: JSON 배열
  - 기술 스택: JSON 배열
  - 추천사: JSON 객체

#### 저장 프로세스
1. 우측 상단 "새 포트폴리오 항목" 버튼을 클릭합니다.
2. 모달 다이얼로그가 열립니다.
3. 필수 항목(Slug, 제목, 요약, 프로젝트 타입)을 입력합니다.
4. 선택 항목을 필요에 따라 입력합니다.
5. JSON 필드는 유효한 JSON 형식으로 입력합니다 (예: `["item1", "item2"]`).
6. "저장" 버튼을 클릭합니다.
7. 저장 중: "저장 중..." 메시지 표시, 버튼 비활성화
8. 저장 완료: "포트폴리오 생성 완료" 토스트 메시지 표시, 모달 닫힘
9. 저장 실패: "포트폴리오 생성 실패" 토스트 메시지 표시, 오류 내용 표시

---

### 3. 수정

#### 수정 가능 항목
- 모든 필드 수정 가능 (Slug 포함)

#### 수정 불가 항목
- ID (자동 생성)
- 생성일 (created_at)
- 생성자 (createdBy)

#### 수정 프로세스
1. 테이블에서 수정하려는 프로젝트의 "수정" 버튼(연필 아이콘)을 클릭합니다.
2. 모달 다이얼로그가 열리고 기존 값이 폼에 채워집니다.
3. 수정하려는 항목의 값을 변경합니다.
4. "저장" 버튼을 클릭합니다.
5. 저장 완료: "포트폴리오 수정 완료" 토스트 메시지 표시, 모달 닫힘
6. 저장 실패: "포트폴리오 수정 실패" 토스트 메시지 표시, 오류 내용 표시

#### Featured/공개 상태 빠른 토글
- 테이블의 "Featured" 스위치를 클릭하여 즉시 토글 가능
- 테이블의 "공개" 스위치를 클릭하여 즉시 토글 가능
- 토글 완료: "Featured 상태 변경" 또는 "공개 상태 변경" 토스트 메시지 표시
- 토글 실패: "상태 변경 실패" 토스트 메시지 표시

---

### 4. 삭제

#### 삭제 조건
- 관리자 권한이 있는 사용자만 삭제 가능
- 삭제된 데이터는 복구할 수 없음

#### 연관 데이터 처리
- 현재 연관 데이터 처리 로직 없음 (프로젝트 단독 삭제)

#### 삭제 프로세스
1. 테이블에서 삭제하려는 프로젝트의 "삭제" 버튼(휴지통 아이콘)을 클릭합니다.
2. 삭제 확인 다이얼로그가 표시됩니다.
3. 메시지: "정말로 이 포트폴리오 항목을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."
4. "삭제" 버튼을 클릭하여 확인합니다.
5. 삭제 완료: "포트폴리오 삭제 완료" 토스트 메시지 표시
6. 삭제 실패: "포트폴리오 삭제 실패" 토스트 메시지 표시, 오류 내용 표시

---

## 주의사항

### 데이터 일관성
- **Slug 중복**: Slug는 고유해야 하지만 시스템에서 중복 검사를 하지 않습니다. 수동으로 고유성을 확인하세요.
- **JSON 필드**: 이미지 URL, 기술 스택, 추천사는 유효한 JSON 형식이어야 합니다. 잘못된 형식 입력 시 저장 실패합니다.
- **URL 필드**: 클라이언트 로고, 썸네일, 프로젝트 URL, GitHub URL은 유효한 URL 형식이어야 합니다.

### 권한 관리
- **Admin 이상 필요**: editor, admin, super_admin 역할만 접근 가능합니다.
- **RLS 정책**: Supabase RLS 정책에 따라 권한이 제어됩니다.
- **CreatedBy 자동 설정**: 생성 시 현재 로그인한 사용자의 ID가 자동으로 설정됩니다.

### 에러 처리
- **네트워크 오류**: 네트워크 연결 실패 시 "알 수 없는 오류가 발생했습니다." 메시지 표시
- **JSON 파싱 오류**: JSON 필드에 잘못된 형식 입력 시 저장 실패, 오류 메시지 표시
- **필수 항목 누락**: 필수 항목 미입력 시 빨간색 오류 메시지 표시, 저장 불가

---

## FAQ

### Q1: 이미지 URL을 어떻게 입력하나요?
**A**: 이미지 URL 필드는 JSON 배열 형식으로 입력해야 합니다. 예시:
```json
["https://example.com/image1.jpg", "https://example.com/image2.jpg"]
```
쉼표로 구분하고 큰따옴표로 감싸야 합니다.

### Q2: Featured 프로젝트는 몇 개까지 설정할 수 있나요?
**A**: Featured 프로젝트 개수에 제한은 없습니다. 단, 너무 많이 설정하면 사용자 화면에서 Featured 의미가 희석될 수 있습니다.

### Q3: 공개하지 않은 프로젝트는 어디에서 볼 수 있나요?
**A**: 공개하지 않은 프로젝트(published=false)는 관리자 페이지에서만 볼 수 있습니다. 일반 사용자 화면에는 표시되지 않습니다.

### Q4: 프로젝트 타입은 어떻게 선택하나요?
**A**: 프로젝트 타입은 4가지 중 선택할 수 있습니다:
- **MVP**: 최소 기능 제품
- **Fullstack**: 풀스택 개발 프로젝트
- **Design**: 디자인 중심 프로젝트
- **Operations**: 운영/관리 프로젝트

### Q5: 삭제한 프로젝트를 복구할 수 있나요?
**A**: 아니요, 삭제한 프로젝트는 복구할 수 없습니다. 삭제 전 반드시 확인하세요.

### Q6: 기술 스택은 몇 개까지 입력할 수 있나요?
**A**: 기술 스택 개수에 제한은 없습니다. 단, 테이블에서는 최대 3개까지만 표시되고 나머지는 "+N개"로 표시됩니다. 모든 기술 스택은 상세 화면에서 확인할 수 있습니다.

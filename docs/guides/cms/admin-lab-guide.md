# AdminLab 관리 가이드

## 개요

### 목적
AdminLab 페이지는 회사의 실험 및 연구 프로젝트를 관리하는 관리자 전용 페이지입니다. 실험, 아이디어, 커뮤니티, 연구 등 다양한 카테고리의 Lab 프로젝트를 등록하고 관리할 수 있습니다.

### 주요 기능
- Lab 프로젝트 목록 조회
- 프로젝트 검색 및 필터링 (카테고리, 상태)
- 프로젝트 생성, 수정, 삭제
- 공개/비공개 상태 토글
- GitHub/Demo URL 관리
- 프로젝트 상태 관리 (탐색 중, 개발 중, 테스트 중, 완료, 보관됨)

### 접근 권한
- **필요 권한**: Admin 이상 (editor, admin, super_admin)
- **접근 경로**: `/admin/lab`

---

## 화면 구성

### 목록 화면
- **상단**: 페이지 제목, "새 Lab 항목" 버튼
- **검색 및 필터**:
  - 검색창: 제목 또는 설명으로 검색
  - 카테고리 필터: 전체 카테고리, 실험, 아이디어, 커뮤니티, 연구
  - 상태 필터: 전체 상태, 탐색 중, 개발 중, 테스트 중, 완료, 보관됨
- **테이블 컬럼**:
  - 제목: Lab 프로젝트 제목 및 부제목
  - 카테고리: 카테고리 뱃지 (실험, 아이디어, 커뮤니티, 연구)
  - 상태: 상태 뱃지 (탐색 중, 개발 중, 테스트 중, 완료, 보관됨)
  - GitHub: GitHub 저장소 링크 (있을 경우)
  - 공개: 스위치 토글
  - 작업: 수정, 삭제 버튼

### 생성/편집 화면
- **모달 다이얼로그** 형태로 표시
- **스크롤 가능**: 최대 높이 90vh, 초과 시 스크롤
- **폼 필드**:
  - 기본 정보: Slug, 제목, 부제목, 설명, 본문 (Markdown)
  - 분류: 카테고리, 상태
  - 링크: GitHub URL, Demo URL
  - 날짜: 시작일
  - 기술 정보: 기술 스택 (JSON 배열), 기여자 (JSON 배열), 태그 (JSON 배열)
  - 설정: 공개 여부

---

## 기능 사용법

### 1. 조회

#### 목록 조회
1. `/admin/lab` 페이지에 접속합니다.
2. 등록된 모든 Lab 프로젝트가 테이블로 표시됩니다.
3. 각 프로젝트의 제목, 카테고리, 상태, GitHub 링크를 한눈에 확인할 수 있습니다.

#### 검색
1. 상단 검색창에 제목 또는 설명의 일부를 입력합니다.
2. 입력과 동시에 실시간으로 필터링됩니다.
3. 검색어는 대소문자 구분 없이 동작합니다.

#### 필터링
- **카테고리 필터**:
  - 전체 카테고리: 모든 카테고리 표시
  - 실험 (experiment): 실험 프로젝트만 표시 (보라색 뱃지)
  - 아이디어 (idea): 아이디어 프로젝트만 표시 (파란색 뱃지)
  - 커뮤니티 (community): 커뮤니티 프로젝트만 표시 (초록색 뱃지)
  - 연구 (research): 연구 프로젝트만 표시 (주황색 뱃지)

- **상태 필터**:
  - 전체 상태: 모든 상태 표시
  - 탐색 중 (exploring): 아이디어 탐색 단계 (회색 뱃지)
  - 개발 중 (developing): 개발 진행 중 (파란색 뱃지)
  - 테스트 중 (testing): 테스트 진행 중 (노란색 뱃지)
  - 완료 (completed): 프로젝트 완료 (초록색 뱃지)
  - 보관됨 (archived): 프로젝트 보관 (빨간색 뱃지)

#### 정렬
- 기본 정렬: 최근 생성순 (created_at DESC)
- 테이블 헤더 클릭으로 정렬 변경 불가 (현재 버전)

---

### 2. 생성

#### 필수 입력 항목
- **Slug** (필수): 소문자, 숫자, 하이픈만 가능 (예: `ai-chatbot-experiment`)
- **제목** (필수): Lab 프로젝트 제목
- **설명** (필수): Lab 프로젝트 설명 (최소 1자)
- **카테고리** (필수): experiment, idea, community, research 중 선택
- **상태** (필수): exploring, developing, testing, completed, archived 중 선택

#### 선택 입력 항목
- **부제목**: 프로젝트 부제목 (예: "OpenAI GPT-4를 활용한 대화형 인터페이스")
- **본문 (Markdown)**: Markdown 형식의 상세 내용
- **GitHub URL**: GitHub 저장소 URL (유효한 URL 형식)
- **Demo URL**: 데모 사이트 URL (유효한 URL 형식)
- **시작일**: 프로젝트 시작일 (날짜 선택)
- **기술 스택 (JSON 배열)**: `["React", "TypeScript", "OpenAI"]` 형식
- **기여자 (JSON 배열)**: `["서민원", "홍길동"]` 형식
- **태그 (JSON 배열)**: `["AI", "Chatbot", "Experiment"]` 형식
- **공개 여부**: 공개 시 사용자에게 표시 (기본값: false)

#### 폼 검증 규칙
- **Slug**: 최소 1자 이상, 소문자/숫자/하이픈만 허용 (정규식: `^[a-z0-9-]+$`)
- **제목**: 최소 1자 이상
- **설명**: 최소 1자 이상
- **카테고리**: experiment, idea, community, research 중 하나
- **상태**: exploring, developing, testing, completed, archived 중 하나
- **GitHub URL**: 유효한 URL 형식 또는 빈 문자열
- **Demo URL**: 유효한 URL 형식 또는 빈 문자열
- **JSON 필드**: 유효한 JSON 배열 형식

#### 저장 프로세스
1. 우측 상단 "새 Lab 항목" 버튼을 클릭합니다.
2. 모달 다이얼로그가 열립니다.
3. 필수 항목(Slug, 제목, 설명, 카테고리, 상태)을 입력합니다.
4. 선택 항목을 필요에 따라 입력합니다.
5. JSON 필드는 유효한 JSON 배열 형식으로 입력합니다.
6. "저장" 버튼을 클릭합니다.
7. 저장 중: "저장 중..." 메시지 표시, 버튼 비활성화
8. 저장 완료: "Lab 항목 생성 완료" 토스트 메시지 표시, 모달 닫힘
9. 저장 실패: "Lab 항목 생성 실패" 토스트 메시지 표시, 오류 내용 표시

---

### 3. 수정

#### 수정 가능 항목
- 모든 필드 수정 가능 (Slug 포함)

#### 수정 불가 항목
- ID (자동 생성)
- 생성일 (created_at)
- 수정일 (updated_at, 자동 업데이트)
- 생성자 (createdBy)

#### 수정 프로세스
1. 테이블에서 수정하려는 Lab 항목의 "수정" 버튼(연필 아이콘)을 클릭합니다.
2. 모달 다이얼로그가 열리고 기존 값이 폼에 채워집니다.
3. 수정하려는 항목의 값을 변경합니다.
4. "저장" 버튼을 클릭합니다.
5. 저장 완료: "Lab 항목 수정 완료" 토스트 메시지 표시, 모달 닫힘
6. 저장 실패: "Lab 항목 수정 실패" 토스트 메시지 표시, 오류 내용 표시

#### 공개 상태 빠른 토글
- 테이블의 "공개" 스위치를 클릭하여 즉시 토글 가능
- 토글 완료: "공개 상태 변경" 토스트 메시지 표시 ("비공개로 변경되었습니다." 또는 "공개로 변경되었습니다.")
- 토글 실패: "상태 변경 실패" 토스트 메시지 표시

---

### 4. 삭제

#### 삭제 조건
- 관리자 권한이 있는 사용자만 삭제 가능
- 삭제된 데이터는 복구할 수 없음

#### 연관 데이터 처리
- 현재 연관 데이터 처리 로직 없음 (Lab 항목 단독 삭제)

#### 삭제 프로세스
1. 테이블에서 삭제하려는 Lab 항목의 "삭제" 버튼(휴지통 아이콘)을 클릭합니다.
2. 삭제 확인 다이얼로그가 표시됩니다.
3. 메시지: "정말로 이 Lab 항목을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."
4. "삭제" 버튼을 클릭하여 확인합니다.
5. 삭제 완료: "Lab 항목 삭제 완료" 토스트 메시지 표시
6. 삭제 실패: "Lab 항목 삭제 실패" 토스트 메시지 표시, 오류 내용 표시

---

## 주의사항

### 데이터 일관성
- **Slug 중복**: Slug는 고유해야 하지만 시스템에서 중복 검사를 하지 않습니다. 수동으로 고유성을 확인하세요.
- **Slug 형식**: 소문자, 숫자, 하이픈만 사용 가능합니다. 공백, 대문자, 특수문자는 사용할 수 없습니다.
- **JSON 필드**: 기술 스택, 기여자, 태그는 유효한 JSON 배열 형식이어야 합니다. 잘못된 형식 입력 시 저장 실패합니다.
- **URL 필드**: GitHub URL, Demo URL은 유효한 URL 형식이어야 합니다 (https://로 시작).

### 권한 관리
- **Admin 이상 필요**: editor, admin, super_admin 역할만 접근 가능합니다.
- **RLS 정책**: Supabase RLS 정책에 따라 권한이 제어됩니다.
- **CreatedBy 자동 설정**: 생성 시 현재 로그인한 사용자의 ID가 자동으로 설정됩니다 (RLS 정책에서 처리).

### 에러 처리
- **네트워크 오류**: 네트워크 연결 실패 시 "알 수 없는 오류가 발생했습니다." 메시지 표시
- **JSON 파싱 오류**: JSON 필드에 잘못된 형식 입력 시 저장 실패, 오류 메시지 표시
- **필수 항목 누락**: 필수 항목 미입력 시 빨간색 오류 메시지 표시, 저장 불가
- **URL 형식 오류**: URL 필드에 잘못된 형식 입력 시 "유효한 URL을 입력하세요" 오류 메시지 표시

---

## FAQ

### Q1: Lab 프로젝트와 Portfolio 프로젝트의 차이는 무엇인가요?
**A**: Lab은 실험적이고 진행 중인 프로젝트를 관리하는 데 사용됩니다. Portfolio는 완료된 프로젝트를 고객에게 소개하는 용도입니다. Lab은 상태 변경(탐색 중 → 개발 중 → 완료)이 가능하며, 카테고리(실험, 아이디어, 커뮤니티, 연구)로 분류됩니다.

### Q2: 기술 스택은 어떻게 입력하나요?
**A**: 기술 스택은 JSON 배열 형식으로 입력해야 합니다. 예시:
```json
["React", "TypeScript", "OpenAI"]
```
쉼표로 구분하고 큰따옴표로 감싸야 합니다.

### Q3: GitHub URL이 없는 프로젝트도 등록할 수 있나요?
**A**: 네, GitHub URL은 선택 항목입니다. 입력하지 않으면 테이블에서 "-"로 표시됩니다.

### Q4: 프로젝트 상태는 어떻게 관리하나요?
**A**: 프로젝트 상태는 5가지 중 선택할 수 있습니다:
- **탐색 중 (exploring)**: 아이디어 탐색 단계
- **개발 중 (developing)**: 개발 진행 중
- **테스트 중 (testing)**: 테스트 진행 중
- **완료 (completed)**: 프로젝트 완료
- **보관됨 (archived)**: 프로젝트 보관 (더 이상 진행하지 않음)

### Q5: Markdown 본문은 어떻게 작성하나요?
**A**: Markdown 본문 필드는 Markdown 문법을 지원합니다. 예시:
```markdown
# 제목
## 부제목
- 목록 1
- 목록 2

**굵은 글씨**
*기울임*
```
작성한 내용은 사용자 화면에서 렌더링되어 표시됩니다.

### Q6: 공개하지 않은 Lab 항목은 어디에서 볼 수 있나요?
**A**: 공개하지 않은 Lab 항목(published=false)은 관리자 페이지에서만 볼 수 있습니다. 일반 사용자 화면에는 표시되지 않습니다.

# Sprint 2 ì•„í‚¤í…ì²˜ ì„¤ê³„
## Supabase Integration & Community

**ì‘ì„±ì¼**: 2025-11-14
**Sprint**: 2 / 3
**ìƒíƒœ**: ğŸ“‹ Draft

---

## ğŸ“– ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ](#ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ)
3. [ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°](#ì»´í¬ë„ŒíŠ¸-êµ¬ì¡°)
4. [ë°ì´í„° í”Œë¡œìš°](#ë°ì´í„°-í”Œë¡œìš°)
5. [ì™¸ë¶€ ì„œë¹„ìŠ¤ í†µí•©](#ì™¸ë¶€-ì„œë¹„ìŠ¤-í†µí•©)

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ê°œìš”

### ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     í”„ë¡ íŠ¸ì—”ë“œ (React)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚Portfolio â”‚  â”‚ Roadmap  â”‚  â”‚   Now    â”‚  â”‚   Lab    â”‚    â”‚
â”‚  â”‚  Page    â”‚  â”‚  Page    â”‚  â”‚  Page    â”‚  â”‚  Page    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚             â”‚              â”‚             â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚useProjectsâ”‚ â”‚useRoadmapâ”‚  â”‚ useLogs  â”‚  â”‚useBountiesâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚             â”‚              â”‚             â”‚           â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                        â”‚                                     â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚              â”‚  React Query Cache   â”‚                        â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                        â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â”‚                                     â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚              â”‚  Supabase Client     â”‚                        â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                        â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Supabase PostgreSQL    â”‚
            â”‚  (RLS Enabled)          â”‚
            â”‚                         â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
            â”‚  â”‚  projects        â”‚   â”‚
            â”‚  â”‚  roadmap         â”‚   â”‚
            â”‚  â”‚  logs            â”‚   â”‚
            â”‚  â”‚  bounties        â”‚   â”‚
            â”‚  â”‚  work_inquiries  â”‚   â”‚
            â”‚  â”‚  newsletter_subs â”‚   â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ì™¸ë¶€ ì„œë¹„ìŠ¤ í†µí•© (Sprint 2)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Giscus     â”‚  â”‚   Resend     â”‚  â”‚  Supabase    â”‚      â”‚
â”‚  â”‚  (ëŒ“ê¸€)       â”‚  â”‚  (ì´ë©”ì¼)     â”‚  â”‚ (Newsletter) â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚       â†“                 â†“                  â†“                 â”‚
â”‚  GitHub          ê´€ë¦¬ì ì´ë©”ì¼        êµ¬ë…ì ì´ë©”ì¼          â”‚
â”‚  Discussions     ì•Œë¦¼ ë°œì†¡            (Optional)            â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” ë ˆì´ì–´

1. **í”„ë ˆì  í…Œì´ì…˜ ë ˆì´ì–´** (React Components)
   - í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ (Portfolio, Roadmap, Now, Lab)
   - UI ì»´í¬ë„ŒíŠ¸ (shadcn/ui)

2. **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë ˆì´ì–´** (React Hooks)
   - ì»¤ìŠ¤í…€ í›… (useProjects, useRoadmap, useLogs, useBounties)
   - React Query ìºì‹±

3. **ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´** (Supabase Client)
   - Supabase JavaScript Client
   - RLS ì •ì±… ìë™ ì ìš©

4. **ë°ì´í„° ë ˆì´ì–´** (Supabase PostgreSQL)
   - 6ê°œ í…Œì´ë¸” (5ê°œ ê¸°ì¡´ + 1ê°œ ì‹ ê·œ)
   - RLS (Row Level Security) ì •ì±…

5. **ì™¸ë¶€ ì„œë¹„ìŠ¤ ë ˆì´ì–´**
   - Giscus (ëŒ“ê¸€ ì‹œìŠ¤í…œ)
   - Resend (ì´ë©”ì¼ ë°œì†¡)

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### ê¸°ì¡´ í…Œì´ë¸” (Sprint 1ì—ì„œ ìƒì„±ë¨)

#### 1. projects (í¬íŠ¸í´ë¦¬ì˜¤ í”„ë¡œì íŠ¸)

**ìš©ë„**: Portfolio í˜ì´ì§€ì—ì„œ í”„ë¡œì íŠ¸ ëª©ë¡ í‘œì‹œ

**ìŠ¤í‚¤ë§ˆ**:
```sql
CREATE TABLE public.projects (
  id TEXT PRIMARY KEY,                -- í”„ë¡œì íŠ¸ ID (ì˜ˆ: "ai-chatbot")
  slug TEXT UNIQUE NOT NULL,          -- URL ìŠ¬ëŸ¬ê·¸
  title TEXT NOT NULL,                -- ì œëª© (ì˜ˆ: "AI ì±—ë´‡")
  summary TEXT NOT NULL,              -- ìš”ì•½ (1-2ì¤„)
  description TEXT,                   -- ìƒì„¸ ì„¤ëª… (Markdown)
  status TEXT NOT NULL CHECK (status IN ('backlog', 'in-progress', 'validate', 'launched')),
  category TEXT NOT NULL,             -- ì¹´í…Œê³ ë¦¬ (AI, Automation, Community)
  image TEXT,                         -- ëŒ€í‘œ ì´ë¯¸ì§€ URL
  tags TEXT[] DEFAULT '{}',           -- íƒœê·¸ ë°°ì—´
  metrics JSONB DEFAULT '{}',         -- {progress: 75, contributors: 3, commits: 120}
  tech JSONB DEFAULT '{}',            -- {frontend: ["React"], backend: ["Supabase"]}
  links JSONB DEFAULT '{}',           -- {github: "URL", demo: "URL"}
  timeline JSONB DEFAULT '{}',        -- {start: "2025-01", end: "2025-03"}
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

**ì¸ë±ìŠ¤**:
- `idx_projects_status` (status) - ìƒíƒœë³„ í•„í„°ë§
- `idx_projects_category` (category) - ì¹´í…Œê³ ë¦¬ë³„ í•„í„°ë§
- `idx_projects_slug` (slug) - URL ë¼ìš°íŒ…
- `idx_projects_created_at` (created_at DESC) - ìµœì‹ ìˆœ ì •ë ¬

**RLS ì •ì±…**:
- âœ… SELECT: ëª¨ë‘ í—ˆìš©
- âœ… INSERT/UPDATE/DELETE: ê´€ë¦¬ìë§Œ

**íŒŒì¼**: `supabase/migrations/20250109000001_create_projects.sql`

---

#### 2. roadmap (ë¶„ê¸°ë³„ ë¡œë“œë§µ)

**ìš©ë„**: Roadmap í˜ì´ì§€ì—ì„œ ë¶„ê¸°ë³„ ëª©í‘œ ë° ì§„í–‰ë¥  í‘œì‹œ

**ìŠ¤í‚¤ë§ˆ**:
```sql
CREATE TABLE public.roadmap (
  id BIGSERIAL PRIMARY KEY,
  quarter TEXT NOT NULL,              -- "2025 Q4"
  goal TEXT NOT NULL,                 -- ëª©í‘œ (ì˜ˆ: "ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ êµ¬ì¶•")
  progress INT NOT NULL CHECK (progress >= 0 AND progress <= 100),
  risk TEXT,                          -- ë¦¬ìŠ¤í¬ (Low/Medium/High)
  owner TEXT NOT NULL,                -- ì±…ì„ì (ì˜ˆ: "Sinclair Seo")
  related_projects TEXT[],            -- ê´€ë ¨ í”„ë¡œì íŠ¸ ID ë°°ì—´
  period TEXT,                        -- ê¸°ê°„ (ì˜ˆ: "2025-10 ~ 2025-12")
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

**ì¸ë±ìŠ¤**:
- `idx_roadmap_quarter` (quarter) - ë¶„ê¸°ë³„ ì¡°íšŒ

**RLS ì •ì±…**:
- âœ… SELECT: ëª¨ë‘ í—ˆìš© (anon ì—­í•  GRANT ì™„ë£Œ)
- âœ… INSERT/UPDATE/DELETE: ê´€ë¦¬ìë§Œ

**íŒŒì¼**: `supabase/migrations/20250109000002_create_roadmap.sql`

---

#### 3. logs (í™œë™ ë¡œê·¸)

**ìš©ë„**: Now í˜ì´ì§€ì—ì„œ ìµœê·¼ ì˜ì‚¬ê²°ì •/í•™ìŠµ/ë¦´ë¦¬ìŠ¤ ë¡œê·¸ í‘œì‹œ

**ìŠ¤í‚¤ë§ˆ**:
```sql
CREATE TABLE public.logs (
  id BIGSERIAL PRIMARY KEY,
  type TEXT NOT NULL CHECK (type IN ('decision', 'learning', 'release')),
  content TEXT NOT NULL,              -- ë¡œê·¸ ë‚´ìš©
  project_id TEXT,                    -- ê´€ë ¨ í”„ë¡œì íŠ¸ ID (FOREIGN KEY)
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

**ì¸ë±ìŠ¤**:
- `idx_logs_type` (type) - íƒ€ì…ë³„ í•„í„°ë§
- `idx_logs_created_at` (created_at DESC) - ìµœì‹ ìˆœ ì •ë ¬

**RLS ì •ì±…**:
- âœ… SELECT: ëª¨ë‘ í—ˆìš©
- âœ… INSERT/UPDATE/DELETE: ê´€ë¦¬ìë§Œ

**íŒŒì¼**: `supabase/migrations/20250109000003_create_logs.sql`

---

#### 4. bounties (ì˜¤í”ˆ ë°”ìš´í‹°)

**ìš©ë„**: Lab í˜ì´ì§€ì—ì„œ ë°”ìš´í‹° ëª©ë¡ í‘œì‹œ

**ìŠ¤í‚¤ë§ˆ**:
```sql
CREATE TABLE public.bounties (
  id BIGSERIAL PRIMARY KEY,
  title TEXT NOT NULL,                -- ë°”ìš´í‹° ì œëª©
  skill TEXT NOT NULL,                -- í•„ìš” ìŠ¤í‚¬ (Frontend, Backend, Design)
  reward INT NOT NULL,                -- ë³´ìƒ ê¸ˆì•¡ (KRW)
  deadline DATE,                      -- ë§ˆê°ì¼
  status TEXT NOT NULL CHECK (status IN ('open', 'assigned', 'done')),
  description TEXT,                   -- ìƒì„¸ ì„¤ëª…
  applicants UUID[],                  -- ì§€ì›ì ID ë°°ì—´
  assigned_to UUID,                   -- ë°°ì •ëœ ì‚¬ìš©ì ID
  created_at TIMESTAMPTZ DEFAULT NOW(),
  completed_at TIMESTAMPTZ
);
```

**ì¸ë±ìŠ¤**:
- `idx_bounties_status` (status) - ìƒíƒœë³„ í•„í„°ë§
- `idx_bounties_deadline` (deadline) - ë§ˆê°ì¼ ì •ë ¬

**RLS ì •ì±…**:
- âœ… SELECT: ëª¨ë‘ í—ˆìš©
- âœ… INSERT: ê´€ë¦¬ìë§Œ
- âœ… UPDATE: ì§€ì›ìëŠ” ë³¸ì¸ ì‹ ì²­ë§Œ, ê´€ë¦¬ìëŠ” ëª¨ë‘
- âœ… DELETE: ê´€ë¦¬ìë§Œ

**íŒŒì¼**: `supabase/migrations/20250109000004_create_bounties.sql`

---

#### 5. newsletter_subscriptions (ë‰´ìŠ¤ë ˆí„° êµ¬ë…ì)

**ìš©ë„**: Newsletter êµ¬ë… ê´€ë¦¬ (Sprint 1ì—ì„œ ì´ë¯¸ êµ¬í˜„ë¨)

**ìŠ¤í‚¤ë§ˆ**:
```sql
CREATE TABLE public.newsletter_subscriptions (
  id BIGSERIAL PRIMARY KEY,
  email TEXT UNIQUE NOT NULL,
  status TEXT DEFAULT 'active' CHECK (status IN ('active', 'unsubscribed')),
  subscribed_at TIMESTAMPTZ DEFAULT NOW(),
  unsubscribed_at TIMESTAMPTZ
);
```

**ì¸ë±ìŠ¤**:
- `idx_newsletter_email` (email) - ì¤‘ë³µ í™•ì¸

**RLS ì •ì±…**:
- âœ… SELECT: ëª¨ë‘ í—ˆìš© (anon ì—­í•  GRANT ì™„ë£Œ)
- âœ… INSERT: ëª¨ë‘ í—ˆìš© (êµ¬ë… ì‹ ì²­)
- âœ… UPDATE: ë³¸ì¸ë§Œ (êµ¬ë… ì·¨ì†Œ)
- âœ… DELETE: ê´€ë¦¬ìë§Œ

**íŒŒì¼**: `supabase/migrations/20250109000008_create_newsletter.sql`

---

### ì‹ ê·œ í…Œì´ë¸” (Sprint 2ì—ì„œ ìƒì„±)

#### 6. work_with_us_inquiries (ë¬¸ì˜ ì ‘ìˆ˜)

**ìš©ë„**: Work with Us í¼ ì œì¶œ ì‹œ ë¬¸ì˜ ë‚´ìš© ì €ì¥

**ìŠ¤í‚¤ë§ˆ**:
```sql
CREATE TABLE public.work_with_us_inquiries (
  id BIGSERIAL PRIMARY KEY,
  name TEXT NOT NULL,                 -- ì´ë¦„
  email TEXT NOT NULL,                -- ì´ë©”ì¼
  company TEXT,                       -- íšŒì‚¬ëª… (ì„ íƒ)
  package TEXT NOT NULL,              -- ì„ íƒ íŒ¨í‚¤ì§€ (AI ì»¨ì„¤íŒ…, í”„ë¡œë•íŠ¸ ê°œë°œ, ì›Œí¬í”Œë¡œìš° ìë™í™”)
  budget TEXT,                        -- ì˜ˆì‚° ë²”ìœ„ (ì„ íƒ)
  brief TEXT NOT NULL,                -- í”„ë¡œì íŠ¸ ë¸Œë¦¬í”„ (ìµœì†Œ 50ì)
  status TEXT DEFAULT 'pending' CHECK (status IN ('pending', 'contacted', 'rejected', 'completed')),
  admin_notes TEXT,                   -- ê´€ë¦¬ì ë©”ëª¨ (ì„ íƒ)
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

**ì¸ë±ìŠ¤**:
- `idx_work_inquiries_status` (status) - ìƒíƒœë³„ í•„í„°ë§
- `idx_work_inquiries_created_at` (created_at DESC) - ìµœì‹ ìˆœ ì •ë ¬

**RLS ì •ì±…**:
```sql
-- Public: Insert only (ë¬¸ì˜ ì œì¶œ)
CREATE POLICY "Anyone can submit work inquiries"
  ON public.work_with_us_inquiries
  FOR INSERT
  WITH CHECK (true);

-- Admin: Read all (ê´€ë¦¬ì ì¡°íšŒ)
CREATE POLICY "Admins can read all work inquiries"
  ON public.work_with_us_inquiries
  FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM public.user_roles
      WHERE user_id = auth.uid()
      AND role_id IN (SELECT id FROM public.roles WHERE name = 'admin')
    )
  );

-- Admin: Update all (ê´€ë¦¬ì ìƒíƒœ ì—…ë°ì´íŠ¸)
CREATE POLICY "Admins can update work inquiries"
  ON public.work_with_us_inquiries
  FOR UPDATE
  USING (
    EXISTS (
      SELECT 1 FROM public.user_roles
      WHERE user_id = auth.uid()
      AND role_id IN (SELECT id FROM public.roles WHERE name = 'admin')
    )
  );

-- Admin: Delete all (ê´€ë¦¬ì ì‚­ì œ)
CREATE POLICY "Admins can delete work inquiries"
  ON public.work_with_us_inquiries
  FOR DELETE
  USING (
    EXISTS (
      SELECT 1 FROM public.user_roles
      WHERE user_id = auth.uid()
      AND role_id IN (SELECT id FROM public.roles WHERE name = 'admin')
    )
  );
```

**Trigger**: `updated_at` ìë™ ê°±ì‹ 
```sql
CREATE OR REPLACE FUNCTION update_work_inquiries_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER work_inquiries_updated_at
  BEFORE UPDATE ON public.work_with_us_inquiries
  FOR EACH ROW
  EXECUTE FUNCTION update_work_inquiries_updated_at();
```

**íŒŒì¼**: `supabase/migrations/20251114000001_create_work_inquiries.sql` (Sprint 2ì—ì„œ ìƒì„±)

---

## ğŸ§© ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ community/               # Sprint 2 ì‹ ê·œ
â”‚   â”‚   â””â”€â”€ GiscusComments.tsx   # Giscus ëŒ“ê¸€ ìœ„ì ¯
â”‚   â”œâ”€â”€ newsletter/              # Sprint 2 ì‹ ê·œ
â”‚   â”‚   â””â”€â”€ NewsletterForm.tsx   # ë‰´ìŠ¤ë ˆí„° êµ¬ë… í¼
â”‚   â”œâ”€â”€ work-with-us/            # Sprint 2 ì‹ ê·œ
â”‚   â”‚   â””â”€â”€ WorkWithUsForm.tsx   # ë¬¸ì˜ í¼
â”‚   â””â”€â”€ portfolio/               # ê¸°ì¡´
â”‚       â”œâ”€â”€ ProjectCard.tsx
â”‚       â””â”€â”€ ProjectFilters.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useProjects.ts           # ê¸°ì¡´ (Sprint 1)
â”‚   â”œâ”€â”€ useRoadmap.ts            # ê¸°ì¡´ (Sprint 1)
â”‚   â”œâ”€â”€ useLogs.ts               # ê¸°ì¡´ (Sprint 1)
â”‚   â”œâ”€â”€ useBounties.ts           # ê¸°ì¡´ (Sprint 1)
â”‚   â”œâ”€â”€ useNewsletter.ts         # ê¸°ì¡´ (Sprint 1)
â”‚   â””â”€â”€ useWorkInquiries.ts      # Sprint 2 ì‹ ê·œ
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts              # ê¸°ì¡´
â”‚   â””â”€â”€ email.ts                 # Sprint 2 ì‹ ê·œ (Resend)
â””â”€â”€ pages/
    â”œâ”€â”€ Portfolio.tsx            # Sprint 2 ì—…ë°ì´íŠ¸ (ë™ì  ë°ì´í„°)
    â”œâ”€â”€ Roadmap.tsx              # Sprint 2 ì—…ë°ì´íŠ¸ (ë™ì  ë°ì´í„°)
    â”œâ”€â”€ Now.tsx                  # Sprint 2 ì—…ë°ì´íŠ¸ (ë™ì  ë°ì´í„°)
    â”œâ”€â”€ Lab.tsx                  # Sprint 2 ì—…ë°ì´íŠ¸ (ë™ì  ë°ì´í„°)
    â”œâ”€â”€ Community.tsx            # Sprint 2 ì—…ë°ì´íŠ¸ (Giscus ì¶”ê°€)
    â”œâ”€â”€ BlogPost.tsx             # Sprint 2 ì—…ë°ì´íŠ¸ (Giscus ì¶”ê°€)
    â””â”€â”€ WorkWithUs.tsx           # Sprint 2 ì—…ë°ì´íŠ¸ (í¼ ì¶”ê°€)
```

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸

#### 1. GiscusComments (ëŒ“ê¸€ ìœ„ì ¯)

**íŒŒì¼**: `src/components/community/GiscusComments.tsx`

**Props**:
```typescript
interface GiscusCommentsProps {
  category: 'General' | 'Blog Comments';
  term?: string; // Discussion ì œëª© (optional)
}
```

**ê¸°ëŠ¥**:
- GitHub Discussions ê¸°ë°˜ ëŒ“ê¸€
- ë‹¤í¬ ëª¨ë“œ ìë™ ì „í™˜
- pathname ê¸°ë°˜ ë§¤í•‘ (URL â†’ Discussion)

---

#### 2. NewsletterForm (ë‰´ìŠ¤ë ˆí„° êµ¬ë…)

**íŒŒì¼**: `src/components/newsletter/NewsletterForm.tsx`

**ê¸°ëŠ¥**:
- ì´ë©”ì¼ ì…ë ¥ í¼ (React Hook Form + Zod)
- ì¤‘ë³µ í™•ì¸
- ì„±ê³µ/ì—ëŸ¬ í† ìŠ¤íŠ¸

**Supabase ì—°ë™**:
```typescript
await supabase
  .from('newsletter_subscriptions')
  .insert({ email });
```

---

#### 3. WorkWithUsForm (ë¬¸ì˜ í¼)

**íŒŒì¼**: `src/components/work-with-us/WorkWithUsForm.tsx`

**Fields**:
- ì´ë¦„ (í•„ìˆ˜)
- ì´ë©”ì¼ (í•„ìˆ˜, ì´ë©”ì¼ í˜•ì‹ ê²€ì¦)
- íšŒì‚¬ëª… (ì„ íƒ)
- íŒ¨í‚¤ì§€ ì„ íƒ (í•„ìˆ˜)
- ì˜ˆì‚° ë²”ìœ„ (ì„ íƒ)
- í”„ë¡œì íŠ¸ ë¸Œë¦¬í”„ (í•„ìˆ˜, ìµœì†Œ 50ì)

**Zod Schema**:
```typescript
const workWithUsSchema = z.object({
  name: z.string().min(1, 'ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”'),
  email: z.string().email('ìœ íš¨í•œ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”'),
  company: z.string().optional(),
  package: z.enum(['AI ì»¨ì„¤íŒ…', 'í”„ë¡œë•íŠ¸ ê°œë°œ', 'ì›Œí¬í”Œë¡œìš° ìë™í™”']),
  budget: z.string().optional(),
  brief: z.string().min(50, 'ìµœì†Œ 50ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”'),
});
```

**ì œì¶œ í”Œë¡œìš°**:
1. Supabaseì— ë¬¸ì˜ ì €ì¥
2. Resendë¡œ ê´€ë¦¬ì ì´ë©”ì¼ ë°œì†¡ (ë¹„ë™ê¸°)
3. ì‚¬ìš©ìì—ê²Œ ì„±ê³µ í† ìŠ¤íŠ¸ í‘œì‹œ

---

## ğŸ”„ ë°ì´í„° í”Œë¡œìš°

### 1. í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ (Portfolio í˜ì´ì§€)

```
ì‚¬ìš©ì â†’ Portfolio.tsx
   â†“
useProjects() í›… í˜¸ì¶œ
   â†“
React Query (useQuery)
   â†“
Supabase Client
   â†“
SELECT * FROM projects WHERE status = 'in-progress'
   â†“
RLS ì •ì±… í™•ì¸ (âœ… Public SELECT í—ˆìš©)
   â†“
ê²°ê³¼ ë°˜í™˜ (Project[])
   â†“
React Query ìºì‹± (staleTime: 5ë¶„)
   â†“
ProjectCard ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
```

### 2. ë¡œë“œë§µ ì¡°íšŒ (Roadmap í˜ì´ì§€)

```
ì‚¬ìš©ì â†’ Roadmap.tsx
   â†“
useRoadmap() í›… í˜¸ì¶œ
   â†“
Supabase Client
   â†“
SELECT * FROM roadmap ORDER BY quarter DESC
   â†“
RLS ì •ì±… í™•ì¸ (âœ… anon SELECT í—ˆìš©)
   â†“
ê²°ê³¼ ë°˜í™˜ (Roadmap[])
   â†“
ProgressRing ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ (ì§„í–‰ë¥  ì°¨íŠ¸)
```

### 3. ë¬¸ì˜ í¼ ì œì¶œ (Work with Us í˜ì´ì§€)

```
ì‚¬ìš©ì â†’ WorkWithUs.tsx â†’ WorkWithUsForm
   â†“
í¼ ì…ë ¥ & ê²€ì¦ (React Hook Form + Zod)
   â†“
"ë¬¸ì˜í•˜ê¸°" ë²„íŠ¼ í´ë¦­
   â†“
handleSubmit í•¨ìˆ˜
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Supabase DB   â”‚  Resend Email   â”‚
â”‚   (ë™ê¸°)         â”‚   (ë¹„ë™ê¸°)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“                    â†“
INSERT INTO            sendWorkWithUsEmail()
work_inquiries            â†“
   â†“                 ê´€ë¦¬ì ì´ë©”ì¼ ë°œì†¡
RLS í™•ì¸ (âœ… INSERT)     â†“
   â†“                 (ì‹¤íŒ¨í•´ë„ ì‚¬ìš©ìì—ê²Œ ì„±ê³µ í‘œì‹œ)
ì„±ê³µ ë°˜í™˜
   â†“
í† ìŠ¤íŠ¸: "ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤"
   â†“
í¼ ì´ˆê¸°í™” (reset())
```

### 4. ëŒ“ê¸€ ì‘ì„± (Community í˜ì´ì§€)

```
ì‚¬ìš©ì â†’ Community.tsx
   â†“
GiscusComments ì»´í¬ë„ŒíŠ¸ ë¡œë“œ
   â†“
<iframe src="https://giscus.app/..." />
   â†“
Giscus App â†’ GitHub Discussions API
   â†“
ì‚¬ìš©ì GitHub ë¡œê·¸ì¸ (OAuth)
   â†“
ëŒ“ê¸€ ì‘ì„±
   â†“
GitHub Discussionsì— ì €ì¥
   â†“
Giscus iframe ë¦¬ë¡œë“œ â†’ ëŒ“ê¸€ í‘œì‹œ
```

---

## ğŸŒ ì™¸ë¶€ ì„œë¹„ìŠ¤ í†µí•©

### 1. Giscus (ëŒ“ê¸€ ì‹œìŠ¤í…œ)

**í†µí•© ë°©ë²•**:
```tsx
import Giscus from '@giscus/react';

<Giscus
  repo="IDEA-on-Action/idea-on-action"
  repoId={import.meta.env.VITE_GISCUS_REPO_ID}
  category="General"
  categoryId={import.meta.env.VITE_GISCUS_CATEGORY_GENERAL_ID}
  mapping="pathname"
  theme={resolvedTheme === 'dark' ? 'dark' : 'light'}
/>
```

**ë°ì´í„° íë¦„**:
- ëŒ“ê¸€ ë°ì´í„°ëŠ” **GitHub Discussions**ì— ì €ì¥ (Supabase ì•„ë‹˜)
- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (Giscusê°€ ìë™ ì²˜ë¦¬)

---

### 2. Resend (ì´ë©”ì¼ ë°œì†¡)

**í†µí•© ë°©ë²•**:
```typescript
import { Resend } from 'resend';

const resend = new Resend(import.meta.env.RESEND_API_KEY);

await resend.emails.send({
  from: 'IDEA on Action <noreply@ideaonaction.ai>',
  to: ['sinclairseo@gmail.com'],
  subject: `[ë¬¸ì˜] ${name} - ${package}`,
  html: `...`,
});
```

**ì‚¬ìš© ì¼€ì´ìŠ¤**:
- Work with Us ë¬¸ì˜ ì‹œ ê´€ë¦¬ì ì´ë©”ì¼ ì•Œë¦¼
- Newsletter í™˜ì˜ ì´ë©”ì¼ (Optional)

---

### 3. Newsletter (Supabase ìì²´)

**í†µí•© ë°©ë²•**:
```typescript
// êµ¬ë… ì €ì¥
await supabase
  .from('newsletter_subscriptions')
  .insert({ email });

// êµ¬ë…ì ëª©ë¡ ì¡°íšŒ (Admin)
const { data } = await supabase
  .from('newsletter_subscriptions')
  .select('*')
  .eq('status', 'active');
```

**Weekly Recap ë°œì†¡** (Sprint 3 ë²”ìœ„):
- Supabase Function + Resend API
- ë§¤ì£¼ ì›”ìš”ì¼ ìë™ ë°œì†¡

---

## ğŸ“Š ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### 1. React Query ìºì‹± ì „ëµ

**staleTime ì„¤ì •**:
```typescript
// useProjects.ts
useQuery({
  queryKey: ['projects'],
  queryFn: fetchProjects,
  staleTime: 5 * 60 * 1000, // 5ë¶„
});

// useRoadmap.ts
useQuery({
  queryKey: ['roadmap'],
  queryFn: fetchRoadmap,
  staleTime: 10 * 60 * 1000, // 10ë¶„
});

// useLogs.ts
useQuery({
  queryKey: ['logs'],
  queryFn: fetchLogs,
  staleTime: 2 * 60 * 1000, // 2ë¶„ (ìì£¼ ì—…ë°ì´íŠ¸)
});
```

---

### 2. ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤

**í•„ìˆ˜ ì¸ë±ìŠ¤**:
- `projects(status)` - ìƒíƒœë³„ í•„í„°ë§
- `logs(created_at DESC)` - ìµœì‹ ìˆœ ì •ë ¬
- `bounties(status)` - ìƒíƒœë³„ í•„í„°ë§
- `work_inquiries(created_at DESC)` - ìµœì‹  ë¬¸ì˜ ì¡°íšŒ

---

### 3. ì´ë¯¸ì§€ ìµœì í™”

**í”„ë¡œì íŠ¸ ì´ë¯¸ì§€**:
- WebP í¬ë§· ê¶Œì¥
- Lazy Loading (`loading="lazy"`)
- Supabase Storage CDN í™œìš©

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. RLS (Row Level Security) ì •ì±…

**ëª¨ë“  í…Œì´ë¸” RLS í™œì„±í™”**:
```sql
ALTER TABLE public.projects ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.roadmap ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.logs ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.bounties ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.work_with_us_inquiries ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.newsletter_subscriptions ENABLE ROW LEVEL SECURITY;
```

**ì •ì±… ì›ì¹™**:
- SELECT: ëª¨ë‘ í—ˆìš© (public ë°ì´í„°)
- INSERT: ì œí•œì  í—ˆìš© (ë¬¸ì˜, êµ¬ë…)
- UPDATE/DELETE: ê´€ë¦¬ìë§Œ

---

### 2. í™˜ê²½ë³€ìˆ˜ ë³´ì•ˆ

**í´ë¼ì´ì–¸íŠ¸ ë…¸ì¶œ ê°€ëŠ¥** (VITE_ ì ‘ë‘ì‚¬):
- `VITE_SUPABASE_URL`
- `VITE_SUPABASE_ANON_KEY`
- `VITE_GISCUS_REPO_ID`

**ì„œë²„ ì „ìš©** (ë…¸ì¶œ ê¸ˆì§€):
- `RESEND_API_KEY`
- `SUPABASE_SERVICE_ROLE_KEY`

---

### 3. XSS ë°©ì§€

**ë§ˆí¬ë‹¤ìš´ ë Œë”ë§**:
```typescript
import ReactMarkdown from 'react-markdown';
import { remark } from 'remark';
import remarkGfm from 'remark-gfm';

<ReactMarkdown
  remarkPlugins={[remarkGfm]}
  components={{
    // HTML íƒœê·¸ í•„í„°ë§ (í—ˆìš© ëª©ë¡ ë°©ì‹)
  }}
>
  {content}
</ReactMarkdown>
```

---

## âœ… ì•„í‚¤í…ì²˜ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

Sprint 2 êµ¬í˜„ ì‹œ ë‹¤ìŒ í•­ëª©ì„ í™•ì¸í•˜ì„¸ìš”:

### ë°ì´í„°ë² ì´ìŠ¤
- [ ] ê¸°ì¡´ í…Œì´ë¸” 5ê°œ í™•ì¸ (projects, roadmap, logs, bounties, newsletter)
- [ ] ì‹ ê·œ í…Œì´ë¸” 1ê°œ ìƒì„± (work_with_us_inquiries)
- [ ] RLS ì •ì±… ëª¨ë‘ ì„¤ì •
- [ ] ì¸ë±ìŠ¤ ìµœì í™” ì™„ë£Œ

### ì»´í¬ë„ŒíŠ¸
- [ ] GiscusComments ì»´í¬ë„ŒíŠ¸ ìƒì„±
- [ ] NewsletterForm ì»´í¬ë„ŒíŠ¸ ìƒì„±
- [ ] WorkWithUsForm ì»´í¬ë„ŒíŠ¸ ìƒì„±

### í›…
- [ ] useProjects, useRoadmap, useLogs, useBounties ë™ì‘ í™•ì¸
- [ ] useWorkInquiries ì‹ ê·œ ìƒì„±

### ì™¸ë¶€ ì„œë¹„ìŠ¤
- [ ] Giscus ì„¤ì • ì™„ë£Œ (repoId, categoryId)
- [ ] Resend ë„ë©”ì¸ ê²€ì¦ ì™„ë£Œ
- [ ] Resend API Key ë°œê¸‰

### ì„±ëŠ¥
- [ ] React Query ìºì‹± ì„¤ì •
- [ ] Lazy Loading ì ìš©
- [ ] Lighthouse Performance 90+

### ë³´ì•ˆ
- [ ] RLS ì •ì±… í…ŒìŠ¤íŠ¸
- [ ] í™˜ê²½ë³€ìˆ˜ ë¶„ë¦¬ (VITE_ / ì„œë²„ ì „ìš©)
- [ ] XSS ë°©ì§€ (Markdown í•„í„°ë§)

---

**ë¬¸ì„œ ë³€ê²½ ì´ë ¥**:
- 2025-11-14: ì´ˆì•ˆ ì‘ì„± (v1.0)

# Claude AI 통합 요구사항 명세서

> IDEA on Action과 Minu 서비스 시리즈를 위한 Claude AI 직접 통합 요구사항

**작성일**: 2025-11-24
**버전**: 1.0.0
**상태**: Draft
**관련 문서**: [Claude Skills 요구사항](../claude-skills/requirements.md), [MCP Auth 시스템](../central-hub/requirements.md)

---

## 1. 개요

### 1.1 목적

Claude AI API를 IDEA on Action 허브 시스템과 Minu 4개 서비스에 직접 통합하여, 지능형 문서 생성, 분석, 추천 기능을 제공합니다. 기존 Claude Skills(xlsx, docx, pptx)와 결합하여 AI 기반 자동화 워크플로우를 구현합니다.

### 1.2 대상 서비스

| 서비스 | AI 통합 목적 | 핵심 활용 |
|--------|-------------|-----------|
| **IDEA on Action Hub** | 통합 AI 어시스턴트 | 서비스 안내, 문서 요약, 인사이트 생성 |
| **Minu Find** | 사업기회 분석 | 시장 분석, 경쟁사 분석, 기회 스코어링 |
| **Minu Frame** | 요구사항 생성 | RFP 자동 작성, 요구사항 분류, 제안서 검토 |
| **Minu Build** | 프로젝트 지원 | 코드 리뷰, 문서 생성, 이슈 분류 |
| **Minu Keep** | 운영 지원 | 장애 분석, 보고서 생성, 개선 제안 |

### 1.3 기존 시스템 연동

| 기존 시스템 | 연동 방식 | 설명 |
|------------|----------|------|
| **MCP Auth** | 서비스 토큰 확장 | AI 기능 권한을 MCP 토큰에 포함 |
| **xlsx Skill** | AI 분석 결과 → Excel | 분석 데이터를 시트로 변환 |
| **docx Skill** | AI 생성 콘텐츠 → Word | AI 작성 문서를 Word로 출력 |
| **pptx Skill** | AI 콘텐츠 → PowerPoint | AI 제안서를 발표 자료로 변환 |

---

## 2. 사용자 스토리

### US-CI-01: AI 기반 문서 분석
> **As a** 비즈니스 분석가
> **I want to** 업로드한 문서(PDF, Word)를 AI가 분석하고 요약
> **So that** 핵심 내용을 빠르게 파악하고 의사결정할 수 있다

**인수 조건**:
- [ ] PDF/Word 파일 업로드 시 AI가 텍스트 추출 및 분석
- [ ] 3단계 요약 제공: 한 줄 요약, 핵심 포인트(5개), 상세 요약
- [ ] 문서 유형 자동 감지 (RFP, 계약서, 보고서, 매뉴얼)
- [ ] 질문-응답 인터페이스로 문서 내용 탐색

### US-CI-02: AI 기반 RFP 자동 생성
> **As a** 프로젝트 매니저
> **I want to** 간단한 요구사항 입력으로 완성된 RFP 문서 생성
> **So that** 문서 작성 시간을 80% 단축할 수 있다

**인수 조건**:
- [ ] 프로젝트 개요, 목적, 범위 입력 시 RFP 초안 생성
- [ ] 요구사항 자동 분류 (기능/비기능, MoSCoW 우선순위)
- [ ] 산업별 표준 템플릿 적용 (정부, 금융, IT, 제조)
- [ ] AI 추천 평가 기준 및 배점 제안
- [ ] 생성된 RFP를 docx/xlsx로 내보내기

### US-CI-03: AI 기반 시장 분석
> **As a** 사업 기획자
> **I want to** AI가 시장 트렌드와 경쟁사를 분석하여 기회 점수 산출
> **So that** 데이터 기반 사업 의사결정을 할 수 있다

**인수 조건**:
- [ ] 시장 키워드 입력 시 트렌드 분석 리포트 생성
- [ ] 경쟁사 목록 입력 시 SWOT 분석 자동 생성
- [ ] 기회 스코어링 (시장 크기, 성장률, 경쟁 강도, 진입 장벽)
- [ ] 분석 결과를 Excel 매트릭스로 내보내기

### US-CI-04: AI 어시스턴트 대화형 인터페이스
> **As a** 서비스 사용자
> **I want to** 채팅으로 AI에게 질문하고 작업 요청
> **So that** 복잡한 UI 없이 자연어로 작업을 수행할 수 있다

**인수 조건**:
- [ ] 실시간 채팅 인터페이스 제공
- [ ] 대화 히스토리 유지 (세션 기반)
- [ ] 다중 턴 대화 지원 (컨텍스트 유지)
- [ ] 코드 블록, 테이블, 마크다운 렌더링
- [ ] 파일 첨부 및 분석 요청 가능

### US-CI-05: AI 기반 코드 리뷰 및 문서 생성
> **As a** 개발자
> **I want to** 코드를 AI가 리뷰하고 문서를 자동 생성
> **So that** 코드 품질을 높이고 문서화 시간을 절약할 수 있다

**인수 조건**:
- [ ] 코드 스니펫 또는 GitHub PR 링크로 리뷰 요청
- [ ] 보안 취약점, 성능 이슈, 코드 스타일 체크
- [ ] API 문서 자동 생성 (OpenAPI 형식)
- [ ] README, 변경 로그 자동 작성

### US-CI-06: AI 기반 운영 장애 분석
> **As a** 운영 담당자
> **I want to** 장애 로그를 AI가 분석하여 원인과 해결책 제안
> **So that** 장애 복구 시간을 단축할 수 있다

**인수 조건**:
- [ ] 로그 파일 업로드 시 패턴 분석
- [ ] 유사 과거 장애 이력 검색 및 매칭
- [ ] 근본 원인 분석(RCA) 리포트 생성
- [ ] 재발 방지 권고사항 제안
- [ ] 장애 대응 보고서 자동 생성

---

## 3. 기능 요구사항

### FR-CI-01: Claude API 연동

#### FR-CI-01.1: API 클라이언트

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| Claude API 클라이언트 생성 | @anthropic-ai/sdk 사용 | P0 |
| 메시지 전송 및 응답 수신 | Messages API 호출 | P0 |
| 스트리밍 응답 지원 | 실시간 응답 표시 | P0 |
| 대화 컨텍스트 관리 | 멀티턴 대화 지원 | P0 |
| 에러 핸들링 | Rate Limit, 타임아웃 처리 | P0 |

#### FR-CI-01.2: 프롬프트 관리

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 시스템 프롬프트 템플릿 | 서비스별 맞춤 프롬프트 | P0 |
| 프롬프트 버전 관리 | 템플릿 버전 추적 | P1 |
| 변수 치환 시스템 | {{변수}} 형식 동적 삽입 | P0 |
| 프롬프트 A/B 테스트 | 성능 비교 실험 | P2 |

### FR-CI-02: 문서 분석 기능

#### FR-CI-02.1: 파일 처리

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| PDF 텍스트 추출 | pdf-parse 라이브러리 | P0 |
| Word 텍스트 추출 | mammoth 라이브러리 | P0 |
| 이미지 OCR | Vision API 활용 | P2 |
| 파일 크기 검증 | 최대 10MB 제한 | P0 |

#### FR-CI-02.2: 분석 유형

| 분석 유형 | 출력 형식 | 우선순위 |
|----------|----------|----------|
| 문서 요약 | 마크다운 텍스트 | P0 |
| 핵심 포인트 추출 | 번호 목록 | P0 |
| 문서 분류 | 카테고리 라벨 | P1 |
| 엔티티 추출 | JSON 구조체 | P1 |
| 감성 분석 | 스코어 및 근거 | P2 |

### FR-CI-03: 콘텐츠 생성 기능

#### FR-CI-03.1: RFP 생성

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 프로젝트 개요 → RFP 초안 | AI 기반 생성 | P0 |
| 요구사항 자동 분류 | 기능/비기능 구분 | P0 |
| 평가 기준 추천 | 배점 포함 | P1 |
| 일정 계획 추천 | 마일스톤 제안 | P1 |

#### FR-CI-03.2: 보고서 생성

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 주간 보고서 초안 | 데이터 기반 생성 | P0 |
| 월간 보고서 초안 | KPI 분석 포함 | P0 |
| 장애 대응 보고서 | 로그 분석 기반 | P1 |
| 경영진 브리핑 | 1페이지 요약 | P1 |

### FR-CI-04: 채팅 인터페이스

#### FR-CI-04.1: UI 컴포넌트

| 컴포넌트 | 설명 | 우선순위 |
|----------|------|----------|
| ChatWindow | 메시지 표시 영역 | P0 |
| MessageInput | 텍스트 입력 및 파일 첨부 | P0 |
| MessageBubble | 사용자/AI 메시지 구분 | P0 |
| StreamingText | 실시간 응답 애니메이션 | P0 |
| CodeBlock | 코드 하이라이팅 | P1 |

#### FR-CI-04.2: 기능

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 실시간 스트리밍 | SSE 기반 응답 | P0 |
| 대화 저장 | 세션별 히스토리 | P1 |
| 대화 내보내기 | 마크다운/PDF | P2 |
| 피드백 수집 | 좋아요/싫어요 | P2 |

### FR-CI-05: Skills 연동

#### FR-CI-05.1: AI → Skills 파이프라인

| 파이프라인 | 입력 | 출력 | 우선순위 |
|-----------|------|------|----------|
| AI 분석 → xlsx | 분석 데이터 JSON | Excel 파일 | P0 |
| AI 생성 → docx | 마크다운 텍스트 | Word 문서 | P0 |
| AI 제안 → pptx | 슬라이드 구조 JSON | PowerPoint | P1 |

#### FR-CI-05.2: 통합 워크플로우

| 워크플로우 | 설명 | 우선순위 |
|-----------|------|----------|
| 시장분석 → Excel 리포트 | Find 서비스 | P0 |
| RFP 생성 → Word 문서 | Frame 서비스 | P0 |
| 프로젝트 요약 → PPT | Build 서비스 | P1 |
| 운영 리포트 → Excel+Word | Keep 서비스 | P1 |

### FR-CI-06: 권한 및 사용량 관리

#### FR-CI-06.1: 권한 연동

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| MCP 토큰에 AI 권한 포함 | claude_access 클레임 | P0 |
| 플랜별 AI 기능 제한 | 기본/프로/엔터프라이즈 | P0 |
| API 호출 권한 체크 | 기능별 권한 검증 | P0 |

#### FR-CI-06.2: 사용량 추적

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 토큰 사용량 기록 | 입력/출력 토큰 | P0 |
| 일/월 사용량 집계 | 사용자/서비스별 | P0 |
| 사용량 한도 알림 | 80%/100% 도달 시 | P1 |
| 사용량 대시보드 | 관리자 UI | P1 |

---

## 4. 비기능 요구사항

### NFR-CI-01: 성능

| 항목 | 요구사항 |
|------|----------|
| 첫 토큰 응답 시간 | 2초 이내 (Time to First Token) |
| 스트리밍 지연 | 토큰당 50ms 이내 |
| 문서 분석 시간 | 10페이지 기준 10초 이내 |
| 동시 요청 처리 | 사용자당 1개, 시스템 전체 50개 |
| API 타임아웃 | 60초 |

### NFR-CI-02: 보안

| 항목 | 요구사항 |
|------|----------|
| API 키 관리 | Supabase Vault에 암호화 저장 |
| 사용자 데이터 | Claude에 전송되는 데이터 익명화 |
| 대화 로그 | 30일 보관 후 자동 삭제 |
| 입력 검증 | 프롬프트 인젝션 방어 |
| 출력 필터링 | 민감 정보 마스킹 |

### NFR-CI-03: 가용성

| 항목 | 요구사항 |
|------|----------|
| 서비스 가용성 | Claude API 의존, 99% 목표 |
| 폴백 전략 | API 장애 시 안내 메시지 |
| Rate Limit 대응 | 큐잉 및 재시도 |
| 에러 복구 | 자동 재시도 (최대 3회) |

### NFR-CI-04: 비용 효율성

| 항목 | 요구사항 |
|------|----------|
| 모델 선택 | 작업별 최적 모델 (Claude 3.5 Sonnet/Haiku) |
| 프롬프트 최적화 | 불필요한 토큰 최소화 |
| 캐싱 | 동일 요청 결과 캐싱 (5분 TTL) |
| 배치 처리 | 가능한 경우 요청 묶음 처리 |

### NFR-CI-05: 사용성

| 항목 | 요구사항 |
|------|----------|
| 한글 지원 | 모든 인터페이스 및 응답 한글 |
| 응답 포맷 | 마크다운 기본, 필요시 JSON |
| 에러 메시지 | 사용자 친화적 한글 안내 |
| 로딩 상태 | 진행률 또는 스피너 표시 |

---

## 5. 비기능 요구사항 상세

### NFR-CI-01 성능 세부사항

#### 5.1.1 응답 시간 기준

| 작업 | 목표 | 최대 허용 |
|------|------|----------|
| 짧은 질문 응답 | 1초 | 3초 |
| 문서 요약 (5페이지) | 5초 | 15초 |
| RFP 생성 (전체) | 30초 | 60초 |
| 시장 분석 리포트 | 20초 | 45초 |

#### 5.1.2 처리량 기준

| 구분 | 한도 |
|------|------|
| 사용자당 동시 요청 | 1개 |
| 분당 요청 (사용자) | 20회 |
| 일일 요청 (무료 플랜) | 50회 |
| 일일 요청 (Pro 플랜) | 500회 |
| 일일 요청 (Enterprise) | 무제한 |

### NFR-CI-02 보안 세부사항

#### 5.2.1 데이터 보호

| 항목 | 정책 |
|------|------|
| API 키 | 환경 변수로 주입, 코드에 하드코딩 금지 |
| 사용자 입력 | Claude 전송 전 PII 스크러빙 옵션 |
| 응답 저장 | 암호화 저장, 사용자별 격리 |
| 감사 로그 | 모든 AI 호출 기록 (사용자, 시간, 토큰 수) |

#### 5.2.2 프롬프트 보안

| 위협 | 대응 |
|------|------|
| 프롬프트 인젝션 | 시스템 프롬프트와 사용자 입력 분리 |
| 탈옥 시도 | 입력 필터링 및 모니터링 |
| 민감 정보 누출 | 출력 스캔 및 마스킹 |

---

## 6. 우선순위 매트릭스

| 우선순위 | 기능 | 이유 |
|----------|------|------|
| **P0** | Claude API 클라이언트 | 모든 AI 기능의 기반 |
| **P0** | 스트리밍 응답 | 사용자 경험 핵심 |
| **P0** | 채팅 인터페이스 | 주요 상호작용 방식 |
| **P0** | MCP 권한 연동 | 기존 인증 시스템 활용 |
| **P0** | 사용량 추적 | 비용 관리 필수 |
| **P1** | 문서 분석 (PDF/Word) | Minu Find 핵심 |
| **P1** | RFP 자동 생성 | Minu Frame 핵심 |
| **P1** | Skills 연동 (xlsx/docx) | 기존 Skills 활용 |
| **P1** | 대화 히스토리 저장 | 사용자 편의 |
| **P2** | 코드 리뷰 | Minu Build 부가 |
| **P2** | 장애 분석 | Minu Keep 부가 |
| **P2** | 이미지 OCR | 고급 문서 분석 |
| **P3** | 프롬프트 A/B 테스트 | 최적화 도구 |
| **P3** | 대화 내보내기 | 부가 기능 |

---

## 7. 용어 정의

| 용어 | 정의 |
|------|------|
| **Claude API** | Anthropic의 Claude AI 모델 API (Messages API) |
| **Streaming** | 응답을 토큰 단위로 실시간 전송하는 방식 |
| **TTFT** | Time to First Token, 첫 응답 토큰까지 시간 |
| **Prompt Engineering** | AI 응답 품질을 높이기 위한 프롬프트 최적화 |
| **Context Window** | Claude가 처리할 수 있는 최대 토큰 수 (200K) |
| **Token** | AI 모델의 텍스트 처리 단위 (~0.75 단어) |
| **PII** | Personally Identifiable Information (개인식별정보) |
| **Prompt Injection** | 악의적 프롬프트로 AI 동작 변경 시도 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0.0 | 2025-11-24 | 초기 작성 | Claude |

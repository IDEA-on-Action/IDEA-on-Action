# Sprint 2 승인 기준 (Acceptance Criteria)
## Supabase Integration & Community

> **요구사항**: [requirements.md](./requirements.md)와 연계
> **목적**: 각 기능이 "완료"되었다고 판단할 구체적 기준 정의

**작성일**: 2025-11-14
**Sprint**: 2 / 3
**상태**: 📋 Draft

---

## 📖 목차

1. [FR-2.1: 동적 콘텐츠 관리](#fr-21-동적-콘텐츠-관리)
2. [FR-2.2: 커뮤니티 기능](#fr-22-커뮤니티-기능)
3. [FR-2.3: 협업 문의](#fr-23-협업-문의)
4. [FR-2.4: 뉴스레터](#fr-24-뉴스레터)
5. [비기능 요구사항](#비기능-요구사항)

---

## FR-2.1: 동적 콘텐츠 관리

### AC-2.1.1: 프로젝트 데이터 조회

**Given** 데이터베이스에 3개의 프로젝트가 저장되어 있고
**When** 방문자가 Portfolio 페이지를 방문하면
**Then** 3개의 프로젝트 카드가 표시되어야 한다

**검증 기준**:
- [ ] 각 카드는 제목, 요약, 상태, 태그를 포함
- [ ] 상태 배지 색상이 올바름 (Backlog=회색, InProgress=파랑, Validate=주황, Launched=초록)
- [ ] 태그는 쉼표로 구분되어 표시
- [ ] 로딩 중일 때 스켈레톤 UI 표시
- [ ] 에러 발생 시 "프로젝트를 불러올 수 없습니다" 메시지 표시

**테스트 시나리오**:
```gherkin
Scenario: 프로젝트 목록 정상 조회
  Given 데이터베이스에 다음 프로젝트가 있음:
    | id   | title       | status      | tags        |
    | p001 | AI Chatbot  | Launched    | AI,Support  |
    | p002 | Vibe Agent  | In Progress | AI,Dev      |
    | p003 | Community   | Backlog     | Community   |
  When "/portfolio" 페이지를 방문함
  Then 3개의 프로젝트 카드가 표시됨
  And "AI Chatbot" 카드의 상태는 "Launched"
  And "Vibe Agent" 카드의 태그는 "AI, Dev"
```

---

### AC-2.1.2: 프로젝트 필터링

**Given** Portfolio 페이지에 여러 상태의 프로젝트가 있고
**When** 방문자가 "In Progress" 필터를 클릭하면
**Then** 진행 중인 프로젝트만 표시되어야 한다

**검증 기준**:
- [ ] 필터 탭이 4개 있음 (All, Backlog, In Progress, Launched)
- [ ] 선택된 탭은 강조 표시 (파랑 언더라인)
- [ ] 필터 변경 시 URL 쿼리 업데이트 (`?status=in-progress`)
- [ ] 새로고침 후에도 필터 상태 유지
- [ ] "All" 탭은 전체 프로젝트 표시

**테스트 시나리오**:
```gherkin
Scenario: In Progress 필터 적용
  Given "/portfolio" 페이지에 6개 프로젝트가 있음
    | id   | status      |
    | p001 | Launched    |
    | p002 | In Progress |
    | p003 | In Progress |
    | p004 | Backlog     |
    | p005 | In Progress |
    | p006 | Launched    |
  When "In Progress" 탭을 클릭함
  Then 3개의 프로젝트만 표시됨 (p002, p003, p005)
  And URL은 "/portfolio?status=in-progress"
```

---

### AC-2.1.3: 로드맵 진행률 표시

**Given** 데이터베이스에 "2025 Q4" 로드맵이 진행률 75%로 저장되어 있고
**When** 방문자가 Roadmap 페이지를 방문하면
**Then** 진행률 링 차트가 75%로 표시되어야 한다

**검증 기준**:
- [ ] 링 차트가 SVG로 렌더링됨
- [ ] 진행률 숫자가 중앙에 표시 ("75%")
- [ ] 진행률 색상: 0-30%=빨강, 31-70%=주황, 71-100%=초록
- [ ] 애니메이션: 0%에서 실제 값까지 부드럽게 증가 (1초)
- [ ] 모바일에서도 레이아웃 깨지지 않음

**테스트 시나리오**:
```gherkin
Scenario: 로드맵 진행률 75%
  Given 데이터베이스에 다음 로드맵이 있음:
    | quarter  | goal             | progress | owner        |
    | 2025 Q4  | Community 구축   | 75       | Sinclair Seo |
  When "/roadmap" 페이지를 방문함
  Then 진행률 링 차트는 75%
  And 차트 색상은 초록색 (#10b981)
  And 책임자 이름은 "Sinclair Seo"
```

---

### AC-2.1.4: 활동 로그 최신순 정렬

**Given** 데이터베이스에 10개의 활동 로그가 있고
**When** 방문자가 Now 페이지를 방문하면
**Then** 최신 10개 로그가 시간 역순으로 표시되어야 한다

**검증 기준**:
- [ ] 로그 타입별 아이콘 표시 (Decision=💡, Learning=📚, Release=🚀)
- [ ] 날짜 형식: "2025-11-14" (ISO 8601)
- [ ] 관련 프로젝트 링크 클릭 시 해당 프로젝트 상세 페이지 이동
- [ ] "더 보기" 버튼 클릭 시 다음 10개 로드 (무한 스크롤 또는 페이지네이션)
- [ ] 로그가 0개일 때 "아직 활동 로그가 없습니다" 메시지 표시

**테스트 시나리오**:
```gherkin
Scenario: 최신 활동 로그 10개 표시
  Given 데이터베이스에 15개의 로그가 있음
  When "/now" 페이지를 방문함
  Then 최신 10개 로그만 표시됨
  And 첫 번째 로그의 날짜가 가장 최근
  And "더 보기" 버튼이 표시됨
```

---

## FR-2.2: 커뮤니티 기능

### AC-2.2.1: GitHub 로그인 후 댓글 작성

**Given** 방문자가 Community 페이지에 있고
**When** GitHub 계정으로 로그인 후 댓글을 작성하면
**Then** 댓글이 즉시 목록에 표시되어야 한다

**검증 기준**:
- [ ] "GitHub으로 로그인" 버튼 클릭 시 OAuth 팝업 열림
- [ ] 로그인 성공 시 사용자 아바타 및 닉네임 표시
- [ ] 댓글 작성 폼: 마크다운 에디터, "댓글 달기" 버튼
- [ ] 마크다운 미리보기 탭 제공
- [ ] 댓글 제출 시 즉시 목록에 추가 (새로고침 불필요)
- [ ] 작성자 본인만 수정/삭제 버튼 표시

**테스트 시나리오**:
```gherkin
Scenario: 댓글 작성 성공
  Given "/community" 페이지에 있음
  And GitHub 계정으로 로그인됨 (user: "sinclairseo")
  When 댓글 입력창에 "Great project!" 입력
  And "댓글 달기" 버튼 클릭
  Then 댓글 목록에 "Great project!" 표시됨
  And 작성자는 "sinclairseo"
  And 작성 시각은 "방금 전"
```

---

### AC-2.2.2: 댓글에 답글 달기

**Given** Community 페이지에 댓글이 1개 있고
**When** 다른 사용자가 해당 댓글에 답글을 달면
**Then** 답글이 들여쓰기되어 표시되어야 한다

**검증 기준**:
- [ ] 댓글 하단에 "답글" 버튼 표시
- [ ] 답글 버튼 클릭 시 댓글 폼이 해당 댓글 아래에 나타남
- [ ] 답글은 원댓글보다 왼쪽 여백 +20px
- [ ] 답글에 "@원작성자" 멘션 자동 추가
- [ ] 최대 중첩 깊이: 3단계

**테스트 시나리오**:
```gherkin
Scenario: 답글 작성
  Given 댓글 "Great project!"가 있음 (작성자: sinclairseo)
  When 다른 사용자가 "Thanks!" 답글 작성
  Then 답글이 들여쓰기되어 표시됨
  And 답글 내용은 "@sinclairseo Thanks!"
```

---

### AC-2.2.3: 댓글 Upvote/Downvote

**Given** Community 페이지에 댓글이 있고
**When** 방문자가 Upvote 버튼을 클릭하면
**Then** Upvote 수가 1 증가하고 버튼이 활성화 상태로 변경되어야 한다

**검증 기준**:
- [ ] 댓글 옆에 "👍 5" 형식으로 Upvote 수 표시
- [ ] 로그인 후에만 Upvote 가능
- [ ] Upvote 클릭 시 버튼 색상 변경 (회색 → 파랑)
- [ ] 재클릭 시 Upvote 취소 (토글 방식)
- [ ] 한 사용자당 댓글 1개에 1번만 Upvote 가능

**테스트 시나리오**:
```gherkin
Scenario: Upvote 토글
  Given 댓글 "Great!"의 Upvote 수는 5
  When 로그인 사용자가 Upvote 버튼 클릭
  Then Upvote 수는 6
  And 버튼 색상은 파랑
  When 다시 Upvote 버튼 클릭
  Then Upvote 수는 5
  And 버튼 색상은 회색
```

---

### AC-2.2.4: Blog 포스트 댓글

**Given** Blog 포스트 상세 페이지에 있고
**When** 포스트 하단의 댓글 섹션을 확인하면
**Then** Community 페이지와 동일한 댓글 기능이 작동해야 한다

**검증 기준**:
- [ ] AC-2.2.1 ~ AC-2.2.3과 동일한 기능
- [ ] 포스트 제목 아래에 "💬 5 comments" 배지 표시
- [ ] 댓글 섹션은 포스트 본문 하단에 위치
- [ ] 각 블로그 포스트마다 독립적인 댓글 스레드

**테스트 시나리오**:
```gherkin
Scenario: 블로그 포스트 댓글 5개
  Given 블로그 포스트 "Weekly Recap #1"에 댓글 5개 있음
  When "/blog/weekly-recap-1" 페이지 방문
  Then 제목 아래 "💬 5 comments" 배지 표시
  And 포스트 하단에 댓글 5개 표시
```

---

## FR-2.3: 협업 문의

### AC-2.3.1: Work with Us 폼 제출

**Given** Work with Us 페이지에 있고
**When** 모든 필수 필드를 채우고 제출하면
**Then** "문의가 접수되었습니다" 토스트 메시지가 표시되어야 한다

**검증 기준**:
- [ ] 필수 필드: 이름, 이메일, 프로젝트 브리프
- [ ] 이메일 형식 검증 (정규식: `^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$`)
- [ ] 프로젝트 브리프 최소 50자
- [ ] 패키지 선택: 라디오 버튼 또는 드롭다운
- [ ] 예산 범위: 선택 필드 (예: "₩3M ~ ₩5M")
- [ ] 제출 버튼 클릭 시 로딩 인디케이터 표시 (중복 제출 방지)
- [ ] 제출 성공 시 폼 초기화

**테스트 시나리오**:
```gherkin
Scenario: 유효한 폼 제출
  Given "/work-with-us" 페이지에 있음
  When 다음 정보를 입력함:
    | 필드          | 값                          |
    | 이름          | 홍길동                      |
    | 이메일        | hong@example.com            |
    | 회사          | ABC Corp                    |
    | 패키지        | AI 컨설팅                   |
    | 예산          | ₩3,000,000 ~ ₩5,000,000     |
    | 브리프        | AI 챗봇 도입 상담 요청...   |
  And "문의하기" 버튼 클릭
  Then 토스트 메시지 "문의가 접수되었습니다" 표시
  And 폼이 초기화됨
```

---

### AC-2.3.2: 폼 검증 에러

**Given** Work with Us 폼에 있고
**When** 이메일 형식이 잘못된 채로 제출하면
**Then** 이메일 필드에 "유효한 이메일 주소를 입력해주세요" 에러 메시지가 표시되어야 한다

**검증 기준**:
- [ ] 필수 필드 누락 시 "이 필드는 필수입니다" 에러
- [ ] 이메일 형식 오류 시 "유효한 이메일 주소를 입력해주세요"
- [ ] 브리프 50자 미만 시 "최소 50자 이상 입력해주세요"
- [ ] 에러 메시지는 필드 아래에 빨간색으로 표시
- [ ] 에러 필드로 포커스 이동

**테스트 시나리오**:
```gherkin
Scenario: 이메일 형식 오류
  Given "/work-with-us" 페이지에 있음
  When 이메일 필드에 "invalid-email" 입력
  And "문의하기" 버튼 클릭
  Then 이메일 필드 아래 에러 메시지 표시
  And 메시지는 "유효한 이메일 주소를 입력해주세요"
  And 폼은 제출되지 않음
```

---

### AC-2.3.3: 관리자 이메일 알림

**Given** 방문자가 Work with Us 폼을 제출하고
**When** 제출이 성공하면
**Then** 관리자 이메일로 알림이 발송되어야 한다

**검증 기준**:
- [ ] 수신자: sinclairseo@gmail.com
- [ ] 제목: "[IDEA on Action] 새 문의: {이름} - {패키지}"
- [ ] 본문 포함:
  - 제출 시각 (KST)
  - 문의자 정보 (이름, 이메일, 회사)
  - 선택 패키지 & 예산 범위
  - 프로젝트 브리프 전문
- [ ] 이메일 발송 실패 시 관리자 대시보드에 알림 표시 (사용자에게는 성공 메시지)

**테스트 시나리오**:
```gherkin
Scenario: 관리자 이메일 발송
  Given 문의 폼이 제출됨:
    | 이름   | 홍길동          |
    | 이메일 | hong@example.com |
    | 패키지 | AI 컨설팅       |
  When 제출 성공
  Then sinclairseo@gmail.com로 이메일 발송됨
  And 제목은 "[IDEA on Action] 새 문의: 홍길동 - AI 컨설팅"
  And 본문에 프로젝트 브리프 포함
```

---

## FR-2.4: 뉴스레터

### AC-2.4.1: Footer 뉴스레터 구독

**Given** 어떤 페이지에서든 Footer가 보이고
**When** 이메일 주소를 입력하고 "구독" 버튼을 클릭하면
**Then** "뉴스레터 구독 신청 완료!" 토스트 메시지가 표시되어야 한다

**검증 기준**:
- [ ] Footer에 뉴스레터 구독 섹션 표시
- [ ] 입력 필드: 이메일 (placeholder: "your@email.com")
- [ ] "구독" 버튼 클릭 시 로딩 인디케이터
- [ ] 이메일 형식 검증
- [ ] 제출 성공 시 토스트 메시지 표시
- [ ] 입력창 초기화

**테스트 시나리오**:
```gherkin
Scenario: 뉴스레터 구독 성공
  Given 홈페이지에 있음
  When Footer의 이메일 입력창에 "test@example.com" 입력
  And "구독" 버튼 클릭
  Then 토스트 메시지 "뉴스레터 구독 신청 완료!" 표시
  And 입력창이 빈 상태로 초기화됨
```

---

### AC-2.4.2: 중복 이메일 구독 방지

**Given** 이미 구독 중인 이메일이 있고
**When** 동일한 이메일로 다시 구독 시도하면
**Then** "이미 구독 중입니다" 메시지가 표시되어야 한다

**검증 기준**:
- [ ] 이메일 중복 확인 (대소문자 구분 없음)
- [ ] 중복 시 토스트 메시지: "이미 구독 중입니다"
- [ ] 데이터베이스에 중복 레코드 생성되지 않음

**테스트 시나리오**:
```gherkin
Scenario: 중복 이메일 구독
  Given "test@example.com"이 이미 구독 중
  When Footer에서 "test@example.com" 입력하고 구독 클릭
  Then 토스트 메시지 "이미 구독 중입니다" 표시
  And 데이터베이스에 새 레코드 생성되지 않음
```

---

### AC-2.4.3: 관리자 구독자 목록 조회

**Given** 관리자가 Admin 대시보드에 로그인했고
**When** Newsletter 관리 페이지를 방문하면
**Then** 전체 구독자 목록이 테이블로 표시되어야 한다

**검증 기준**:
- [ ] 테이블 컬럼: 이메일, 가입일, 상태 (활성/비활성)
- [ ] 정렬: 가입일 역순 (최신 구독자가 상단)
- [ ] 검색: 이메일로 필터링
- [ ] "CSV 내보내기" 버튼 (이메일 리스트만 다운로드)
- [ ] 페이지네이션: 페이지당 50개

**테스트 시나리오**:
```gherkin
Scenario: 구독자 목록 조회
  Given 관리자로 로그인됨
  And 구독자가 100명 있음
  When "/admin/newsletter" 페이지 방문
  Then 최신 50명의 구독자가 표시됨
  And 테이블 컬럼은 "이메일, 가입일, 상태"
  And "다음 페이지" 버튼이 표시됨
```

---

## 비기능 요구사항

### NFR-1: 성능

**AC-NFR-1.1: 페이지 로딩 속도**
- [ ] Lighthouse Performance 점수 90 이상
- [ ] 초기 로딩 시간 (FCP) < 1.5초
- [ ] 최대 콘텐츠 렌더링 (LCP) < 2.5초
- [ ] 누적 레이아웃 이동 (CLS) < 0.1
- [ ] 이미지 최적화 (WebP 포맷, Lazy Loading)

**AC-NFR-1.2: 데이터베이스 쿼리**
- [ ] 프로젝트 목록 조회 < 500ms
- [ ] 댓글 목록 조회 < 300ms
- [ ] 인덱스 설정 (projects.status, logs.created_at)
- [ ] N+1 쿼리 문제 해결 (관련 데이터 JOIN)

---

### NFR-2: 보안

**AC-NFR-2.1: XSS 방지**
- [ ] 사용자 입력 모두 이스케이프 처리
- [ ] 마크다운 렌더링 시 HTML 태그 필터링 (허용 목록 방식)
- [ ] CSP (Content Security Policy) 헤더 설정

**AC-NFR-2.2: CSRF 방지**
- [ ] 폼 제출 시 CSRF 토큰 검증
- [ ] SameSite 쿠키 설정

**AC-NFR-2.3: Rate Limiting**
- [ ] 뉴스레터 구독: IP당 5분에 3회
- [ ] 문의 폼: IP당 10분에 2회
- [ ] 댓글 작성: 사용자당 1분에 5회

---

### NFR-3: 접근성

**AC-NFR-3.1: WCAG 2.1 AA 준수**
- [ ] Lighthouse Accessibility 점수 95 이상
- [ ] 폼 필드에 label 연결
- [ ] 에러 메시지에 aria-live 속성
- [ ] 키보드로 모든 기능 접근 가능
- [ ] 포커스 인디케이터 명확히 표시

**AC-NFR-3.2: 스크린 리더 지원**
- [ ] 이미지에 alt 속성
- [ ] 아이콘에 aria-label
- [ ] 로딩 상태에 aria-busy

---

### NFR-4: 반응형

**AC-NFR-4.1: 모바일 지원**
- [ ] 375px (iPhone SE) ~ 1920px (Desktop) 대응
- [ ] 터치 타겟 최소 44x44px
- [ ] 모바일에서 댓글 폼 최적화 (전체 화면 모드)

---

### NFR-5: 다크 모드

**AC-NFR-5.1: 테마 지원**
- [ ] 모든 페이지 다크 모드 대응
- [ ] 댓글 위젯 다크 모드 지원
- [ ] 색상 대비 (Contrast Ratio) 4.5:1 이상

---

## ✅ 전체 승인 기준 체크리스트

Sprint 2가 "완료"로 승인되려면 다음 조건을 **모두** 충족해야 합니다:

### 기능 승인 (Functional)
- [ ] AC-2.1.1 ~ AC-2.1.4: 동적 콘텐츠 관리 (4개)
- [ ] AC-2.2.1 ~ AC-2.2.4: 커뮤니티 기능 (4개)
- [ ] AC-2.3.1 ~ AC-2.3.3: 협업 문의 (3개)
- [ ] AC-2.4.1 ~ AC-2.4.3: 뉴스레터 (3개)

**총 14개 기능 승인 기준**

### 비기능 승인 (Non-Functional)
- [ ] NFR-1: 성능 (2개)
- [ ] NFR-2: 보안 (3개)
- [ ] NFR-3: 접근성 (2개)
- [ ] NFR-4: 반응형 (1개)
- [ ] NFR-5: 다크 모드 (1개)

**총 9개 비기능 승인 기준**

---

## 📝 검증 방법

### 수동 테스트
1. 기능 체크리스트 순서대로 수동 테스트 진행
2. 각 시나리오마다 스크린샷 또는 비디오 기록
3. 에러 발생 시 재현 단계 문서화

### 자동화 테스트
1. E2E 테스트 (Playwright)
   - 댓글 작성/수정/삭제 플로우
   - 폼 제출 플로우
   - 뉴스레터 구독 플로우
2. 유닛 테스트 (Vitest)
   - 폼 검증 로직
   - 데이터 조회 훅
3. Lighthouse CI
   - 성능 점수 자동 측정
   - 접근성 점수 자동 측정

---

**문서 변경 이력**:
- 2025-11-14: 초안 작성 (v1.0)
